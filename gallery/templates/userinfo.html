{% extends "layout.html" %}
{% block content %}
    <div class="container" style="background: url({{ url_for('static', filename='assets/css/mo.jpg') }});background-size: cover;min-height: 86vh; transform: translateY(2vh);border-radius: 1rem ;min-width: 96vw;">
      <div class="page-content" style="background-color: transparent;">
        <div class="container align-items-center" style="background-color: rgba(255, 255, 255, 0.6); backdrop-filter: blur(30px); padding: 7vh 7vw;border-radius: 20px; box-shadow: 4px 4px 7px rgba(0, 0, 0, 0.1);max-width: 1000px;">
          <div class="content-section">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    {% for category, message in messages %}
                        <div class='alert alert-{{ category }}'>
                            {{ message }}
                        </div>
                    {% endfor %}
                {% endif %}
            {% endwith %}
            <form method="POST" action="#" enctype="multipart/form-data">
              <div class="media mb-4 d-flex header-text" style="background-color: rgba(253, 132, 173, 0.4);padding: 9px 9px;border-radius: 12px;box-shadow: 3px 3px 5px rgba(0, 0, 0, 0.075);">
               {{ form.picture(class="form-control-file", style="display: none") }}
               <label for="{{ form.picture.id }}" class="rounded-circle account-img" style="cursor: pointer;">
              <img class="rounded-circle account-img pfp-brit me-5" style="width: 150px; height: auto;" src="{{ imagepfp }}">
                </label>
                <div class="media-body">
                  <h2 class="account-heading mt-5">{{ current_user.username }}</h2>
                  <p class="text-secondary">{{ current_user.email }}</p>
                </div>
              </div>
              <div class="mt-2">
                <fieldset class="form-group">
                {{ form.hidden_tag() }}
                  <legend class="mb-4">User Info</legend><hr>
                  <div class="d-flex" style="justify-content: space-between;">
                    <div class="mb-3" style="width:46%">
                      {{ form.firstname.label(class="form-label") }}
                      {% if form.firstname.errors %}
                          {{ form.firstname(class="form-control is-invalid") }}
                          <div class="invalid-feedback">
                              {% for errors in form.firstname.errors %}
                                  <span>{{ errors }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.firstname(class="form-control") }}
                      {% endif %}
                    </div>
                    <div class="mb-3" style="width:46%">
                      {{ form.lastname.label(class="form-label") }}
                      {% if form.lastname.errors %}
                          {{ form.lastname(class="form-control is-invalid") }}
                          <div class="invalid-feedback">
                              {% for errors in form.lastname.errors %}
                                  <span>{{ errors }}</span>
                              {% endfor %}
                          </div>
                      {% else %}
                          {{ form.lastname(class="form-control") }}
                      {% endif %}
                    </div>
                  </div>
                  <div class="mb-3">
                    {{ form.username.label(class="form-label") }}
                    {% if form.username.errors %}
                        {{ form.username(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for errors in form.username.errors %}
                                <span>{{ errors }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.username(class="form-control") }}
                    {% endif %}
                  </div>
                  <div class="mb-3">
                    {{ form.email.label(class="form-label") }}
                    {% if form.email.errors %}
                        {{ form.email(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for errors in form.email.errors %}
                                <span>{{ errors }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ form.email(class="form-control") }}
                    {% endif %}
                  </div>
                  <div class="mb-3 mt-4">
                    {{ form.submit(class="btn btn-dark") }}
                  </div>
                </fieldset>
            </form>
            <form autocomplete="off" method="POST" action="#">
                {{ security.hidden_tag() }}
              <div class="mt-3 ">
                <fieldset class="form-group">
                  <legend class="border-bottom mb-4">Security</legend>
                  <div class="mb-3">
                    {{ security.current.label(class="form-label") }}
                    {% if security.current.errors %}
                        {{ security.current(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for errors in security.current.errors %}
                                <span>{{ errors }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ security.current(class="form-control") }}
                    {% endif %}
                  </div>
                  <div class="mb-3">
                    {{ security.new.label(class="form-label") }}
                    {% if security.new.errors %}
                        {{ security.new(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for errors in security.new.errors %}
                                <span>{{ errors }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ security.new(class="form-control") }}
                    {% endif %}
                  </div>
                  <div class="mb-3">
                    {{ security.confirm.label(class="form-label") }}
                    {% if security.confirm.errors %}
                        {{ security.confirm(class="form-control is-invalid") }}
                        <div class="invalid-feedback">
                            {% for errors in security.confirm.errors %}
                                <span>{{ errors }}</span>
                            {% endfor %}
                        </div>
                    {% else %}
                        {{ security.confirm(class="form-control") }}
                    {% endif %}
                  </div>
                  <div class="mb-3 mt-4">
                    {{ security.submit(class="btn btn-dark") }}
                  </div>
                </fieldset>
              </div>
            </form>
          </div>
        </div>
      </div>
{% endblock content %}
